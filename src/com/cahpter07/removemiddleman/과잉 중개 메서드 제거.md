# 과잉 중개 메서드 제거

###### Remove Middle Man

클래스에 자잘한 위임이 너무 많을 땐 대리 객체를 클라이언트가 직접 호출하게 하자
</br>

[클래스 다이어그램]

![Remove Middle Man.png](https://raw.githubusercontent.com/machine-human/Refactoring-Study/master/image/Remove%20Middle%20Man.PNG)

</br>

[방법]

1. 대리 객체에 대한 접근 메서드를 작성
2. 대리 메서드를 클라이언트가 사용할 때마다 서버에서 메서드를 제거하고
3. 클라이언트에서의 호출을 대리 객체에서의 메서드 호출로 교체
4. 메서드를 수정할 때마다 테스트를 실시

</br>

[예제]

- 수정 전

  ```java
  public class Person {
      Department department;
  
      public void setDepartment(Department department) {
          this.department = department;
      }
  
      public Person getManager() {
          return department.getManager();
      }
  }
  ```
  
  ```java
  public class Department {
      private String chargeCode;
      private Person manager;
  
      public Department(Person manager) {
          this.manager = manager;
      }
  
      public Person getManager() {
          return manager;
      }
  
      public String getChageCode() {
          return chargeCode;
      }
  
      public void setChageCode(String chargeCode) {
          this.chargeCode = chargeCode;
      }
  }
  ```
  
  ```java
  //클라이언트의 요청
  //사용이 간단하며, Department 객체를 캡슐화 함
  //그러나 이런 메서드가 많다면 자잘한 위임이 Person 객체에 너무 많아진다
  manager = john.getManager();
  ```
  </br>
  
- 수정 후

  - Person 클래스의 getMamager() 메소드 변경
  - Person 객체의 메서드를 사용하는 클라이언트가 대리 객체를 먼저 거치게끔 수정 후 Person 클래스의 getManager 메서드를 삭제
  
  ```java
  public class Person {
      Department department;
  
      public Department getDepartment() {
          return department;
      }
  
      public void setDepartment(Department department) {
          this.department = department;
    }
  }
  ```
  
  ```java
  //클라이언트의 요청
  //Person 객체의 메서드를 사용하는 클라이언트를 찾아서
  //그 클라이언트가 대리 객체를 먼저 거치게끔 수정
  manager = john.getDepartment().getManager();
  ```

</br>

[저자 왈]
- 편의상 일부 위임 메서드는 그대로 둬야 할 때도 있음
- 대리 객체를 일부 클라이언트에게만 감추고 나머지 클라이언트에겐 공개해야 할 때도 있음
  - 그럴 때는 간단한 위임 메서드 중 일부를 그대로 내버려두면 됨
