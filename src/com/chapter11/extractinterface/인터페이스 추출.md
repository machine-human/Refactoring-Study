# 인터페이스 추출

###### Extract Interface

클래스 인터페이스의 같은 부분을 여러 클라이언트가 사용하거나,

두 클래스에 인터페이스의 일부분이 공통으로 들어 있을 땐 공통 부분을 인터페이스로 빼내자

</br>

[클래스 다이어그램]

![Extract Interface.PNG](https://raw.githubusercontent.com/machine-human/Refactoring-Study/master/image/Extract%20Interface.PNG)

</br>

[방법]

1. 빈 인터페이스를 작성

</br>

2. 공통 기능을 인터페이스 안에 선언

</br>

3. 그 인터페이스를 상속구현하는 관련 클래스들을 선언

</br>

4. 그 인터페이스를 사용하게 클라이언트의 타입 선언 코드를 수정

</br>

[예제]

- 수정 전

  ```java
  public class Employee {
      private int rate;
  
      public Employee(int rate) {
          this.rate = rate;
      }
  
      public int getRate() {
          return rate;
      }
  
      public boolean hasSpecialSkill() {
          return true;
      }
  }
  
  ```
  
  ```java
  public class TimeSheet {
      double charge(Employee emp, int days) {
          int base = emp.getRate() * days;
          if (emp.hasSpecialSkill()) {
              return base * 1.05;
          } else {
              return base;
          }
      }
  }
  ```

</br>

- 수정 후

  - Employee 클래스에 두 가지 정보만이 필요함을 강조하기 위해 Billable 인터페이스 생성
  - Employee 클래스의 기능 중 이 부분만 사용됨을 보이고자 TimeSheet 클래스의 charge() 메서드 수정
  - charge(Employee emp, int days) -> charge(Billable emp, int days)
  
  ```java
  public class Employee implements Billable {
      private int rate;
  
      public Employee(int rate) {
          this.rate = rate;
      }
  
      public int getRate() {
          return rate;
      }
  
      public boolean hasSpecialSkill() {
          return true;
      }
  }
  
  ```
  
  ```c++
  public class TimeSheet {
      double charge(Billable emp, int days) {
          int base = emp.getRate() * days;
          if (emp.hasSpecialSkill()) {
              return base * 1.05;
          } else {
              return base;
          }
      }
  }
  ```
  
  ```java
  public interface Billable {
      int getRate();
  
      boolean hasSpecialSkill();
  }
  ```