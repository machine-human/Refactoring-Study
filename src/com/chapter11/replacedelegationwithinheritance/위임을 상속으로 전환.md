# 위임을 상속으로 전환

###### Replace Delegation with Inheritance

위임을 이용 중인데 인터페이스 전반에 간단한 위임으로 도배하게 될 땐

위임 클래스를 대리 객체의 하위클래스로 만들자

</br>

[클래스 다이어그램]

![Replace Delegation with Inheritance.PNG](https://raw.githubusercontent.com/machine-human/Refactoring-Study/master/image/Replace%20Delegation%20with%20Inheritance.PNG)

</br>

[방법]

1. 위임 클래스를 대리 객체의 하위클래스로 만들자

</br>

2. 컴파일
   
   (이때 일부 메서드가 충돌할 수도 있음)
   
   (반환 타입, 예외, 개방도가 다르지만 메서드명이 같을 수 있음)
   
   (이 문제는 메서드명 변경을 적용해 수정)

</br>

3. 대리 필드에 대리 객체 자체를 할당

</br>

4. 단순 위임 메서드를 전부 삭제

</br>

5. 컴파일과 테스트를 실시

</br>

6. 다른 위임 부분을 전부 대리 객체 자체를 호출하는 코드로 변경

</br>

7. 대리 필드를 삭제

</br>

[예제]

- 수정 전

  ```java
  public class Employee {
  	Person person = new Person();
  
  	public String getName() {
  		return person.getName();
  	}
  
  	public void setName(String arg) {
  		this.person.setName(arg);
  	}
  
  	public String toString() {
  		return "사원" + person.getLastName();
  	}
  }
  ```
  
  ```java
  public class Person {
  	String name;
  
  	public String getName() {
  		return name;
  	}
  
  	public void setName(String name) {
  		this.name = name;
  	}
  
  	public String getLastName() {
  		return name.substring(name.lastIndexOf(' ') + 1);
  	}
  }
  ```

</br>

- 수정 후

  ```java
  public class Employee extends Person{
  
  	public String toString() {
  		return "사원" + getLastName();
  	}
  }
  ```
  
  ```c++
  public class Person {
  	String name;
  
  	public String getName() {
  		return name;
  	}
  
  	public void setName(String name) {
  		this.name = name;
  	}
  
  	public String getLastName() {
  		return name.substring(name.lastIndexOf(' ') + 1);
  	}
  }
  ```
