# 직관적 임시변수 사용

###### Introduce Explaining Variable

사용된 수식이 복잡할 땐 수식의 결과나 수식의 일부분을 용도에 부합하는 직관적 이름의 임시변수에 대입하자
</br>
</br>

[보기]

- 변경 전

  ```java
  if ((platform.toUpperCase().indexOf("MAC") > -1) &&
  	(browser.toUpperCase().indexOf("IE") > -1) && 
      wasInitialized() && resize > 0) 
  {
  	// 기능 코드
  }
  ```
</br>

- 변경 후

  ```java
  final boolean isMacOs = platform.toUpperCase().indexOf("MAC") > -1;
  final boolean isIEBrowser = browser.toUpperCase().indexOf("IE") > -1;
  final boolean wasResized = resize > 0;
  
  if (isMacOs && isIEBrowser && wasInitialized() && wasResized){
      // 기능 코드
  }
  ```
</br>

[방법]

1. 임시변수를 final로 선언하고, 복잡한 수식에서 한 부분의 결과를 그 입시변수에 대입
   
2. 그 수식에서 한 부분의 결과를 그 임시변수의 값으로 교체

   (수식의 결과 부분이 반복될 경우엔 한 번에 하나씩 교체하면 됨)

3. 컴파일과 테스트를 실시

4. 수식의 다른 부분을 대상으로 위의 과정을 반복 실시
</br>

[예제 - 직관적 임시변수 사용]

- 수정 전

  ```java
  private double price() {    
      // 결제액(price) = 총 구매액(base price) -    
      // 대량 구매 할인(quantitiy discount) + 배송비(shipping)    
      return quantitiy * itemPrice -            
          Math.max(0, quantitiy - 500) * itemPrice * 0.05 + 
          Math.min(quantitiy * itemPrice * 0.1, 100.0);
  }
  ```
</br>

- 수정 후

  1. basePrice 임시변수 생성
  2. quantityDiscount 임시변수 생성
  3. shipping 임시변수 생성

  ```java
  private double price() {    
      // 결제액(price) = 총 구매액(base price) -    
      // 대량 구매 할인(quantitiy discount) + 배송비(shipping)    
      final double basePrice = quantitiy * itemPrice;    
      final double quantityDiscount = Math.max(0, quantitiy - 500) * itemPrice * 0.05;
      final double shipping = Math.min(basePrice * 0.1, 100.0);    
      return basePrice - quantityDiscount + shipping;
  }
  ```
</br>

[예제 - 메서드 추출]

- 수정 전

  ```java
  private double price() {    
      // 결제액(price) = 총 구매액(base price) -    
      // 대량 구매 할인(quantitiy discount) + 배송비(shipping)   
      return quantitiy * itemPrice -            
          Math.max(0, quantitiy - 500) * itemPrice * 0.05 +  
          Math.min(quantitiy * itemPrice * 0.1, 100.0);
  }
  ```
</br>

- 수정 후

  1. basePrice() 메서드 생성
  2. quantityDiscount() 메서드 생성
  3. shipping() 메서드 생성

  ```java
  private double price() {    
      // 결제액(price) = 총 구매액(base price) -    
      // 대량 구매 할인(quantitiy discount) + 배송비(shipping)    
      return basePrice() - quantityDiscount() + shipping();
  }
  
  private double basePrice() {    
      return quantitiy * itemPrice;
  }
  
  private double quantityDiscount() {    
      return Math.max(0, quantitiy - 500) * itemPrice * 0.05;
  }
  
  private double shipping() {   
      return Math.min(quantitiy * itemPrice * 0.1, 100.0);
  }
  ```
</br>

[저자 왈]

- 위 두가지 방법 중 메서드 추출을 더 선호하는데 그 이유는?
  - 그 기법을 실시했을 때 이 메서드들을 객체의 다른 부분에서도 사용할 수 있기 때문
  - 처음엔 private로 메서드를 만들고 다른 객체에서 사용해야 할 땐 public으로 변경
  - 또한 직관적 임시변수 사용 기법보다 많은 작업이 필요 없음
  
</br>

- 그럼 도대체 직관적 임시변수 사용 기법은 언제 사용?
  - 메서드 추출 기법 적용이 더 어렵거나 복잡할 때
  
</br>
  
- 메서드 추출 기법이 적용이 어려울 때는 어떤 상황인지?
  - 알고리즘에 수많은 지역변수가 사용될 때는 대체로 메서드 추출을 쉽게 적용할 수 없음
