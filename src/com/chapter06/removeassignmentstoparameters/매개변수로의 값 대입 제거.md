# 매개변수로의 값 대입 제거

###### Remove Assignments to Parameters

매개변수로 값을 대입하는 코드가 있을 땐 매개변수 대신 임시변수를 사용하게 수정
</br>
</br>

[보기]

- 변경 전

  ```java
  int discount(int inputVal, int quantitiy, int yearToDate) {
  	if (inputVal > 50) inputVal -= 2;
  ```
</br>

- 변경 후

  ```java
  int discount(int inputVal, int quantitiy, int yearToDate) {
  	int result = inputVal;
      if (inputVal > 50) result -= 2;
  ```
</br>

[방법]

1. 매개변수 대신 사용할 임시변수를 선언
   
2. 매개변수로 값을 대입하는 코드 뒤에 나오는 매개변수 참조를 전부 임시변수로 수정

3. 매개변수로의 값 대입을 임시변수로의 값 대입으로 수정

4. 컴파일과 테스트 실시

   (의미론이 참조를 통한 호출일 때는 호출한 메서드에서 매개변수가 계속 사용되는지 확인)

   (매개변수 참조를 통한 호출이 몇 개나 이 메서드의 뒷부분에서 대입되고 사용되는지 확인)

   (하나의 값만 반환 값으로 전달하게 만들기)

   (반환 값이 둘 이상이면 객체로 전환하거나 별도의 메서드로 만들 수 있는지 확인)
</br>

[예제 1 - 자바에서 값을 통한 전달]

- 수정 전

  ```java
  private int discount(int inputVal, int quantity, int yearToDate) {    
      if (inputVal > 50) inputVal -= 2;    
      if (quantity > 100) inputVal -= 1;    
      if (yearToDate > 10000) inputVal -= 4;   
      return inputVal;
  }
  ```
</br>

- 수정 후

  1. 매개변수를 임시변수로 변환
  2. 이 관례를 강제 적용하고자 매개변수에 final 키워드 사용

  ```java
  private int discount(final int inputVal,final int quantity,final int yearToDate) {
      int result = inputVal;    
      if (inputVal > 50) result -= 2;    
      if (quantity > 100) result -= 1;    
      if (yearToDate > 10000) result -= 4;    
      return result;
  }
  ```
</br>

[예제 2 - 자바에서 객체를 통한 전달]

- 수정 전

  ```java
  public static void main(String[] args) {    
      int x = 5;   
      triple(x);   
      System.out.println("triple 메서드 실행 후 x 값 : " + x);
  }
  
  private static void triple(int arg) {   
      arg = arg * 3;   
      System.out.println("triple 메서드 안의 arg 값: " + arg);
  }
  ```
</br>

- 수정 후

  - 기본적으로 객체 참조가 값을 통해 전달 되었고,
  - 이 방식은 객체 속성은 변경할 수 있지만 매개 변수로의 새 값 대입은 고려하지 않는다.``

  ```java
  public static void main(String[] args) {   
      Date d1 = new Date("1 Apr 98");  
      nextDateUpdate(d1);    
      System.out.println("nextDay 메서드 실행 후 d1 값 : " + d1);  
      Date d2 = new Date("1 Apr 98");  
      nextDateReplace(d2);   
      System.out.println("nextDay 메서드 실행 후 d2 값 : " + d2);
  }
  
  private static void nextDateUpdate(Date arg) {  
      arg.setDate(arg.getDay() + 1);  
      System.out.println("nextDay 메서드 안의 arg 값 : " + arg);
  }
  
  private static void nextDateReplace(Date arg) {    
      arg = new Date(arg.getYear(), arg.getMonth(), arg.getDate() + 1);    			
      System.out.println("nextDay 메서드 안의 arg 값 : " + arg);
  }
  ```
</br>

[저자 왈]

- 매개변수로의 값 대입이란?

  - 어떤 메서드에 foo 객체를 매개변수로 전달하면 foo의 값을 다른 객체 참조로 변경한다는 의미
  - 매개변수로 전달받은 객체에 어떤한 처리를 해도 상관없고 일상적인 작업이지만,
  - foo의 값을 다른 객체 참조로 변경하는 것은 절대로 안 됨

  ```java
  void aMethod(Object foo) {
      foo.modifyInSomeWay(); //O
      foo = anotherObject;   //X
  }
  ```

</br>

- 매개변수로 전달받은 객체를 다른 객체 참조로 변경하는 것이 안 되는 이유는?
  - '값을 통한 전달'과 '참조를 통한 전달'을 혼동하게 되기 때문
  - '값을 통한 전달'을 사용하면 어떠한 매개변수 값 변화도 호출한 루틴에 반영되지 않음
  - '참조를 통한 전달'을 사용해온 사람은 이것을 혼동할 수 있음

</br>

- 매개변수에 final 키워드?
  - 짧은 메서드의 경우는 final로 선언해도 코드가 더 알아보기 쉬어지진 않지만
  - 긴 메서드에는 다른 코드가 매개변수에 새 값을 대입하는지 쉽게 파악할 수 있음
