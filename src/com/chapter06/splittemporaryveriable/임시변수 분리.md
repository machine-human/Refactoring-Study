# 임시변수 분리
###### Split Temporary Variable

루프 변수나 값 누적용 임시변수가 아닌 임시변수에 여러 번 값이 대입될 땐 각 대입마다 다른 임시변수를 사용



[보기]

- 변경 전

  ```java
  double temp = 2 * (height + width);
  System.out.println(temp);
  temp = height * width;
  System.out.println(temp);
  ```



- 변경 후

  ```java
  final double perimeter = 2 * (height + width);
  System.out.println(perimeter);
  final double area = height * width;
  System.out.println(area);
  ```



[방법]

1. 선언문과 첫 번째 대입문에 있는 임시변수 이름을 변경하자
   
   (대입 부분이 i=i +  수식 형태라면 i는 값 누적용 임시변수이므로 분리하면 안 됨)
   
   (값 누적용 임시변수에 주로 사용하는 플러스 기호 연산자의 기능은 덧셈, 문자열 연결, 스트림에 쓰기, 컬렉션에 첨가하기 등이 있음)
   
2. 이름을 바꾼 새 임시변수를 final로 선언

3. 그 임시변수의 모든 참조 부분을 두 번째 대입문으로 수정

4. 두 번째 대입문에 있는 임시변수를 선언

5. 컴파일과 테스트 실시

6. 각 대입문마다 차례로 선언문에서 임시변수 이름을 변경하고,

7. 대입문까지 참조를 수정하며 위의 과정을 반복



[예제 - 해기스가 이동한 거리를 계산]

- 수정 전

  ```java
  private double getDistanceTravelled(int time) {    
      double result;    
      double acc = primartForce / mass;    
      int primaryTime = Math.min(time, delay);    
      result = 0.5 * acc * primaryTime * primaryTime;    
      int secondaryTime = time - delay;
      
      if (secondaryTime > 0) {        
          double primaryVel = acc * delay;        
          acc = (primartForce + secondaryForce) / mass;        
          result += primaryVel * secondaryTime + 0.5 *                
              acc * secondaryTime * secondaryTime;    
      }    
      return result;
  }
  ```



- 수정 후 

  - aac 임시변수 분리
    1. aac -> primaryAcc 임시변수 추가
    2. aac -> secondaryAcc 임시변수 추가
  - 이외 추가적인 리팩토링 적용할 여지가 있음 (예 - 메소드 추출 기법등)

  ```java
  private double getDistanceTravelled(int time) {    
      double result;    
      final double primaryAcc = primartForce / mass;    
      int primaryTime = Math.min(time, delay);    
      result = 0.5 * primaryAcc * primaryTime * primaryTime;    
      int secondaryTime = time - delay;    
      if (secondaryTime > 0) {        
          double primaryVel = primaryAcc * delay;        
          final double secondaryAcc = (primartForce + secondaryForce) / mass;
          result += primaryVel * secondaryTime + 0.5 *                
              secondaryAcc * secondaryTime * secondaryTime;    
      }   
      return result;
  }
  ```